<template>
    <header>
        《从vue-loader开始理解webpack的一些设计思想》
    </header>
    <div>
        <div class="menu">
            <div @click='openRouter("before","top")' class='menu-2 before'>一、写在前面</div>
            <ul>
                <li>
                    <span @click='openRouter("before","menu")'>目录结构</span>
                </li>
                <li>
                    <span @click='openRouter("before","source")'>框架源码</span>
                </li>
            </ul>
            <div @click='openRouter("loader","top")' class='menu-2 loader'>二、Loader和执行顺序</div>
            <ul>
                <li>
                    <span @click='openRouter("loader","loader")'>loader</span>
                </li>
                <li>
                    <span @click='openRouter("loader","style-loader")'>style-loader</span>
                    <ul>
                        <li>
                            <span @click='openRouter("loader","style-loader-why")'>为什么样式loader比较特殊？</span>
                        </li>
                        <li>
                            <span @click='openRouter("loader","style-loader-picth")'>执行顺序（loader和picth）</span>
                        </li>
                        <li>
                            <span @click='openRouter("loader","style-loader-how")'>如何实现？</span>
                        </li>
                    </ul>
                </li>
            </ul>
            <div @click='openRouter("plug","top")' class='menu-2 plug'>三、插件的作用和一些技巧</div>
            <ul>
                <li>
                    <span @click='openRouter("plug","time")'>插件的执行时机</span>
                </li>
                <li>
                    <span @click='openRouter("plug","how")'>如何实现？</span>
                </li>
            </ul>
        </div>
        <div class="content">
            <component :is='page'></component>
        </div>
    </div>
</template>
<script>
    import fixedScroll from '../../../services/fixedScroll.js';
    export default {
        data() {
            return {
                page: null
            };
        },
        methods: {
            openRouter(pagename, fixedName) {
                this.goRouter(page => {
                    this.page = page;
                    window.location.href = (window.location.href + "").replace(/\?fixed=.*$/, '') + "?fixed=" + fixedName;
                    fixedScroll(document.getElementById('root'), 44);
                }, ['webpack', pagename]);

            }
        },
        mounted() {
            this.loadRouter(page => this.page = page, 2);
        }
    };
</script>
<style>
    [quickpaper]>header {
        font-size: 30px;
        padding: 30px 10px;
        font-weight: 800;
        border-bottom: 1px solid rgb(173, 168, 168);
    }

    [quickpaper]>div {
        font-size: 0;
        white-space: nowrap;
    }

    [quickpaper]>div>div {
        white-space: normal;
        font-size: 14px;
        display: inline-block;
        vertical-align: top;
    }

    .menu {
        width: 260px;
        padding: 10px;
    }

    .menu>div {
        padding: 10px 0 3px 0;
        cursor: pointer;
    }

    .menu>div[active='yes'] {
        color: red;
    }

    .content {
        width: 740px;
    }

    ul {
        margin-left: 20px;
        line-height: 2em;
    }

    li {
        cursor: pointer;
    }
</style>
